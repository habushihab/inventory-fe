import { Directive, ChangeDetectionStrategy, inject } from '@angular/core';
import { FormBuilder, FormGroup } from '@angular/forms';
import { BaseComponent } from './base.component';
import { PerformanceService } from '../services/performance.service';
import { AlertService } from '../services/alert.service';\n\n@Directive()\nexport abstract class BaseFormComponent extends BaseComponent {\n  protected readonly fb = inject(FormBuilder);\n  protected readonly performanceService = inject(PerformanceService);\n  protected readonly alertService = inject(AlertService);\n\n  // Common form properties\n  isLoading = false;\n  showModal = false;\n\n  // Track by functions\n  trackById = this.performanceService.trackById;\n  trackByIndex = this.performanceService.trackByIndex;\n\n  protected setLoading(loading: boolean): void {\n    this.isLoading = loading;\n    this.markForCheck();\n  }\n\n  protected toggleModal(show?: boolean): void {\n    this.showModal = show ?? !this.showModal;\n    this.markForCheck();\n  }\n\n  protected handleError(error: any, operation: string): void {\n    console.error(`Error in ${operation}:`, error);\n    this.setLoading(false);\n    this.alertService.error(\n      'Operation Failed',\n      error.error?.message || `Failed to ${operation}. Please try again.`\n    );\n  }\n\n  protected handleSuccess(message: string, title: string = 'Success'): void {\n    this.setLoading(false);\n    this.alertService.success(title, message);\n  }\n\n  abstract initializeForm(): FormGroup;\n}